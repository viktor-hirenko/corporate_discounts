# ğŸ“š Corporate Discounts â€” Ğ¢ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ

## ğŸ“‹ Ğ—Ğ¼Ñ–ÑÑ‚

1. [ĞĞ³Ğ»ÑĞ´ Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ](#Ğ¾Ğ³Ğ»ÑĞ´-Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ)
2. [ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
3. [Cloudflare Worker (Backend)](#cloudflare-worker-backend)
4. [Pinia Stores](#pinia-stores)
5. [Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³](#Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³)
6. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—)
7. [ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸](#ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸)
8. [Ğ¢Ğ¸Ğ¿Ğ¸ Ñ‚Ğ° Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¸](#Ñ‚Ğ¸Ğ¿Ğ¸-Ñ‚Ğ°-Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¸)
9. [Composables](#composables)
10. [Ğ¡Ñ‚Ğ¸Ğ»Ñ–](#ÑÑ‚Ğ¸Ğ»Ñ–)
11. [Ğ‘ĞµĞ·Ğ¿ĞµĞºĞ°](#Ğ±ĞµĞ·Ğ¿ĞµĞºĞ°)
12. [Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸ Ñ‚Ğ° Ğ·Ğ±Ñ–Ñ€ĞºĞ°](#ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸-Ñ‚Ğ°-Ğ·Ğ±Ñ–Ñ€ĞºĞ°)

---

## ğŸ¯ ĞĞ³Ğ»ÑĞ´ Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ

**Corporate Discounts** â€” Ñ†Ğµ Vue 3 Ğ·Ğ°ÑÑ‚Ğ¾ÑÑƒĞ½Ğ¾Ğº Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ ĞºĞ¾Ñ€Ğ¿Ğ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¼Ğ¸ Ğ·Ğ½Ğ¸Ğ¶ĞºĞ°Ğ¼Ğ¸ Ñ‚Ğ° Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€ÑÑŒĞºĞ¸Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–ÑĞ¼Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ UPSTARS.

### Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ¸Ğ¹ ÑÑ‚ĞµĞº

| Ğ¨Ğ°Ñ€          | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ—                                     |
| ------------ | ---------------------------------------------- |
| **Frontend** | Vue 3.5, TypeScript 5.9, Pinia 3, Vue Router 4 |
| **Styling**  | SCSS, Design Tokens, BEM                       |
| **Build**    | Vite 7                                         |
| **Backend**  | Cloudflare Worker                              |
| **Storage**  | Cloudflare R2                                  |
| **Auth**     | Google Identity Services                       |
| **Linting**  | ESLint 9, Stylelint 16, Prettier 3             |

### ĞšĞ»ÑÑ‡Ğ¾Ğ²Ñ– Ğ¾ÑĞ¾Ğ±Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ–

- ğŸ” Google OAuth Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ğ· whitelist
- ğŸ“± ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ (Mobile-First)
- ğŸŒ ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¼Ğ¾Ğ²Ğ½Ñ–ÑÑ‚ÑŒ (UA/EN)
- ğŸ›ï¸ ĞŸĞ¾Ğ²Ğ½Ğ¾Ñ†Ñ–Ğ½Ğ½Ğ° Ğ°Ğ´Ğ¼Ñ–Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
- ğŸ›¡ï¸ Security Headers, CORS, Rate Limiting
- ğŸ“¤ ĞŸĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğµ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ² R2

---

## ğŸ—ï¸ ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### Ğ”Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLOUDFLARE R2                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ index.html     â”‚  â”‚ assets/        â”‚  â”‚ data/               â”‚  â”‚
â”‚ â”‚ *.js, *.css    â”‚  â”‚ images/        â”‚  â”‚ app-config.json     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘ GET/PUT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLOUDFLARE WORKER                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚                     Request Handler                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚  â”‚ Static File  â”‚  â”‚ API Routes   â”‚  â”‚ Security         â”‚   â”‚  â”‚
â”‚ â”‚  â”‚ Server       â”‚  â”‚ /api/*       â”‚  â”‚ (CORS, Headers)  â”‚   â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚                                                              â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚ â”‚  â”‚ Rate         â”‚  â”‚ SPA          â”‚                         â”‚  â”‚
â”‚ â”‚  â”‚ Limiting     â”‚  â”‚ Fallback     â”‚                         â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VUE 3 FRONTEND                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Views       â”‚  â”‚ Stores      â”‚  â”‚ Composables â”‚  â”‚ Router   â”‚ â”‚
â”‚ â”‚ (Pages)     â”‚  â”‚ (Pinia)     â”‚  â”‚ (Logic)     â”‚  â”‚ (Guards) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Components  â”‚  â”‚ Layouts     â”‚  â”‚ Types       â”‚  â”‚ Utils    â”‚ â”‚
â”‚ â”‚ (UI)        â”‚  â”‚ (Templates) â”‚  â”‚ (TS)        â”‚  â”‚ (Helpers)â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ—ĞĞ’ĞĞĞ¢ĞĞ–Ğ•ĞĞĞ¯ Ğ”ĞĞĞ˜Ğ¥ (Read Flow)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Store.init()                                                 â”‚
â”‚       â†“                                                          â”‚
â”‚  2. getApiUrl('/api/load-config')                               â”‚
â”‚       â†“                                                          â”‚
â”‚  3. Worker API â†’ R2.get('data/app-config.json')                 â”‚
â”‚       â†“                                                          â”‚
â”‚  4. Response JSON â†’ Store.state                                  â”‚
â”‚       â†“                                                          â”‚
â”‚  5. Computed â†’ Components                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ—Ğ‘Ğ•Ğ Ğ•Ğ–Ğ•ĞĞĞ¯ Ğ”ĞĞĞ˜Ğ¥ (Write Flow)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. User Action (Save button)                                    â”‚
â”‚       â†“                                                          â”‚
â”‚  2. ensureStoresInitialized()                                    â”‚
â”‚       â†“                                                          â”‚
â”‚  3. buildFullConfig() â†’ Merge all stores                         â”‚
â”‚       â†“                                                          â”‚
â”‚  4. POST /api/save-config â†’ Worker                              â”‚
â”‚       â†“                                                          â”‚
â”‚  5. Worker â†’ R2.put('data/app-config.json')                     â”‚
â”‚       â†“                                                          â”‚
â”‚  6. Success Response                                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ

```
corporate-discounts/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # Vue ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸
â”‚   â”‚   â”œâ”€â”€ admin/            # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ Ğ°Ğ´Ğ¼Ñ–Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»Ñ–
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminSidebar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminHeader.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminPartnerForm.vue
â”‚   â”‚   â”‚   â””â”€â”€ AdminExportPanel.vue
â”‚   â”‚   â””â”€â”€ icons/            # SVG Ñ–ĞºĞ¾Ğ½ĞºĞ¸ (Vue components)
â”‚   â”‚
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ admin/            # Ğ¡Ñ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ Ğ°Ğ´Ğ¼Ñ–Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»Ñ–
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboardView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminPartnersView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminCategoriesView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLocationsView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminFaqView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminTextsView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminImagesView.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminSettingsView.vue
â”‚   â”‚   â”‚   â””â”€â”€ AdminUsersView.vue
â”‚   â”‚   â”œâ”€â”€ LoginView.vue
â”‚   â”‚   â”œâ”€â”€ DiscountsCatalogView.vue
â”‚   â”‚   â”œâ”€â”€ DiscountDetailsView.vue
â”‚   â”‚   â”œâ”€â”€ FaqView.vue
â”‚   â”‚   â””â”€â”€ PartnersAdminView.vue  # Legacy JSON Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ DefaultLayout.vue     # ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ñ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ AuthLayout.vue        # Ğ¡Ñ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ° Ğ»Ğ¾Ğ³Ñ–Ğ½Ñƒ
â”‚   â”‚   â””â”€â”€ AdminLayout.vue       # ĞĞ´Ğ¼Ñ–Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                # Pinia stores
â”‚   â”‚   â”œâ”€â”€ auth.ts            # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
â”‚   â”‚   â”œâ”€â”€ discounts.ts       # ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ñ–Ğ²
â”‚   â”‚   â”œâ”€â”€ ui.ts              # UI ÑÑ‚Ğ°Ğ½
â”‚   â”‚   â”œâ”€â”€ adminPartners.ts   # Admin: Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ğ¸
â”‚   â”‚   â”œâ”€â”€ adminCategories.ts # Admin: ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ—
â”‚   â”‚   â”œâ”€â”€ adminLocations.ts  # Admin: Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ñ—
â”‚   â”‚   â”œâ”€â”€ adminFaq.ts        # Admin: FAQ
â”‚   â”‚   â”œâ”€â”€ adminTexts.ts      # Admin: Ñ‚ĞµĞºÑÑ‚Ğ¸
â”‚   â”‚   â”œâ”€â”€ adminImages.ts     # Admin: Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ
â”‚   â”‚   â”œâ”€â”€ adminSettings.ts   # Admin: Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
â”‚   â”‚   â”œâ”€â”€ adminUsers.ts      # Admin: ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–
â”‚   â”‚   â””â”€â”€ adminExport.ts     # Admin: ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚/Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”œâ”€â”€ useAppConfig.ts    # Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³Ñƒ
â”‚   â”‚   â”œâ”€â”€ useMediaQuery.ts   # Responsive breakpoints
â”‚   â”‚   â””â”€â”€ usePartnersAdmin.ts # Ğ›Ğ¾Ğ³Ñ–ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ñ–Ğ²
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ app-config.ts      # Ğ¢Ğ¸Ğ¿Ğ¸ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—
â”‚   â”‚   â””â”€â”€ partner.ts         # Ğ¢Ğ¸Ğ¿Ğ¸ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ñ–Ğ²
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ api-config.ts      # Ğ’Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ API URL
â”‚   â”‚   â””â”€â”€ sanitize.ts        # Input sanitization
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ main.scss          # Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ»
â”‚   â”‚   â”œâ”€â”€ base.scss          # Reset, Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ– ÑÑ‚Ğ¸Ğ»Ñ–
â”‚   â”‚   â”œâ”€â”€ core.scss          # Ğ—Ğ¼Ñ–Ğ½Ğ½Ñ–, Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ—, Ğ¼Ñ–ĞºÑĞ¸Ğ½Ğ¸
â”‚   â”‚   â””â”€â”€ responsive.scss    # ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ– ÑÑ‚Ğ¸Ğ»Ñ–
â”‚   â”‚
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ app-config.json    # Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³
â”‚   â”‚
â”‚   â””â”€â”€ design/
â”‚       â””â”€â”€ tokens.json        # Design tokens
â”‚
â”œâ”€â”€ worker/                    # Cloudflare Worker
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ index.ts           # Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ» Worker
â”‚   â”œâ”€â”€ wrangler.toml          # ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy-r2.sh           # Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° R2
â”‚   â”œâ”€â”€ deploy-worker.sh       # Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Worker
â”‚   â”œâ”€â”€ build-tokens.ts        # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ Ñ‚Ğ¾ĞºĞµĞ½Ñ–Ğ²
â”‚   â””â”€â”€ convert-to-webp.ts     # ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ñ–Ñ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½ÑŒ
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ _headers               # Security headers Ğ´Ğ»Ñ R2
â”‚
â””â”€â”€ package.json
```

---

## ğŸ”§ Cloudflare Worker (Backend)

Worker Ğ¾Ğ±ÑĞ»ÑƒĞ³Ğ¾Ğ²ÑƒÑ” ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸ Ğ· R2 Ñ‚Ğ° Ğ½Ğ°Ğ´Ğ°Ñ” API Ğ´Ğ»Ñ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹.

### Ğ¤Ğ°Ğ¹Ğ»: `worker/src/index.ts`

### API Endpoints

| Method | Endpoint           | Auth   | ĞĞ¿Ğ¸Ñ                              |
| ------ | ------------------ | ------ | --------------------------------- |
| `POST` | `/api/login`       | Public | ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ, Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ° |
| `GET`  | `/api/verify`      | JWT    | ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ²Ğ°Ğ»Ñ–Ğ´Ğ½Ğ¾ÑÑ‚Ñ– JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°   |
| `GET`  | `/api/load-config` | Public | Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ğ¸Ñ‚Ğ¸ app-config.json Ğ· R2  |
| `POST` | `/api/save-config` | JWT âš ï¸ | Ğ—Ğ±ĞµÑ€ĞµĞ³Ñ‚Ğ¸ app-config.json Ğ² R2     |
| `GET`  | `/*`               | Public | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸ (SPA fallback)     |

> âš ï¸ `/api/save-config` Ğ²Ğ¸Ğ¼Ğ°Ğ³Ğ°Ñ” Ğ²Ğ°Ğ»Ñ–Ğ´Ğ½Ğ¸Ğ¹ JWT Ñ‚Ğ¾ĞºĞµĞ½ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºÑƒ `Authorization: Bearer <token>`

### CORS Configuration

```typescript
const ALLOWED_ORIGINS = [
  'https://corporate-discounts-worker.upstars-marbella.workers.dev',
  'https://pub-37aeae40035e428e93ab550125107a2d.r2.dev',
  'http://localhost:5173',
  'http://localhost:4173',
  'http://127.0.0.1:5173',
]
```

### Security Headers

```typescript
const securityHeaders = {
  'X-Content-Type-Options': 'nosniff',
  'X-Frame-Options': 'DENY',
  'X-XSS-Protection': '1; mode=block',
  'Referrer-Policy': 'strict-origin-when-cross-origin',
  'Content-Security-Policy': "default-src 'self'; ...",
}
```

### Rate Limiting

```typescript
const RATE_LIMIT_WINDOW = 60 * 1000 // 1 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½Ğ°
const MAX_API_REQUESTS = 30 // 30 Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²/Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½Ñƒ Ğ½Ğ° IP
```

### Environment Variables (wrangler.toml)

```toml
name = "corporate-discounts-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
account_id = "71bd6a3d109ad42e0973488dafe041b2"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "dicounts-upstars-com"

[vars]
BUCKET_NAME = "dicounts-upstars-com"
PUBLIC_URL = "https://pub-37aeae40035e428e93ab550125107a2d.r2.dev"
```

### Secrets (Cloudflare Dashboard)

| Secret                  | ĞĞ¿Ğ¸Ñ                                         |
| ----------------------- | -------------------------------------------- |
| `JWT_SECRET` âš ï¸         | ĞšĞ»ÑÑ‡ Ğ´Ğ»Ñ JWT (Ğ¼Ñ–Ğ½. 32 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¸, Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¹) |
| `AWS_ACCESS_KEY_ID`     | R2 Access Key                                |
| `AWS_SECRET_ACCESS_KEY` | R2 Secret Key                                |
| `GOOGLE_CLIENT_SECRET`  | Google OAuth Secret (Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)            |

> âš ï¸ **JWT_SECRET Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¹!** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ: `openssl rand -hex 32`

### JWT Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Sign in with Google"                          â”‚
â”‚    â†’ Google SDK returns credential (Google JWT)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Frontend sends POST /api/login { credential }              â”‚
â”‚    â†’ Worker validates email against allowedUsers whitelist    â”‚
â”‚    â†’ Worker generates JWT token (signed with JWT_SECRET)      â”‚
â”‚    â†’ Returns { token, user }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Frontend stores JWT in localStorage                        â”‚
â”‚    â†’ Sends Authorization: Bearer <token> with API requests    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Worker validates JWT on protected endpoints                â”‚
â”‚    â†’ /api/save-config requires valid JWT                      â”‚
â”‚    â†’ Returns 401 if token missing/invalid/expired             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Pinia Stores

### ĞĞ³Ğ»ÑĞ´ stores

| Store             | Ğ¤Ğ°Ğ¹Ğ»                 | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ                            |
| ----------------- | -------------------- | -------------------------------------- |
| `auth`            | `auth.ts`            | ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°                |
| `discounts`       | `discounts.ts`       | ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ñ–Ğ² Ğ´Ğ»Ñ Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¹Ñ‚Ñƒ |
| `ui`              | `ui.ts`              | UI ÑÑ‚Ğ°Ğ½ (modals, locale)               |
| `adminPartners`   | `adminPartners.ts`   | CRUD Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ñ–Ğ²                         |
| `adminCategories` | `adminCategories.ts` | CRUD ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ğ¹                         |
| `adminLocations`  | `adminLocations.ts`  | CRUD Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹                           |
| `adminFaq`        | `adminFaq.ts`        | CRUD FAQ                               |
| `adminTexts`      | `adminTexts.ts`      | Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚ĞµĞºÑÑ‚Ñ–Ğ²                    |
| `adminImages`     | `adminImages.ts`     | Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½ÑŒ                  |
| `adminSettings`   | `adminSettings.ts`   | Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ                 |
| `adminUsers`      | `adminUsers.ts`      | Whitelist ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²                 |
| `adminExport`     | `adminExport.ts`     | Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ñ‚Ğ° Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ                  |

### Ğ”Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ° Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ stores

Ğ’ÑÑ– admin stores Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑÑ‚ÑŒ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ñƒ Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ´Ğ»Ñ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…:

```typescript
// ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: adminPartners.ts
export const useAdminPartnersStore = defineStore('adminPartners', () => {
  const partners = ref<Record<string, PartnerConfig>>({})
  const isInitialized = ref(false)

  async function init() {
    if (isInitialized.value) return

    try {
      // Ğ¡Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ Ğ¿Ñ€Ğ¾Ğ±ÑƒÑ”Ğ¼Ğ¾ API
      const response = await fetch(getApiUrl('/api/load-config'))
      if (response.ok) {
        const config = await response.json()
        partners.value = { ...config.partners }
      } else {
        // Fallback: Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ğ¹ Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚
        const configModule = await import('@/data/app-config.json')
        partners.value = { ...configModule.default.partners }
      }
    } catch {
      // Fallback: Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ğ¹ Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚
      const configModule = await import('@/data/app-config.json')
      partners.value = { ...configModule.default.partners }
    }

    isInitialized.value = true
  }

  // ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ° Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
  init()

  return { partners, isInitialized, init /* ... */ }
})
```

### API URL Utility

```typescript
// src/utils/api-config.ts
const WORKER_URL = 'https://corporate-discounts-worker.upstars-marbella.workers.dev'

export function getApiBaseUrl(): string {
  // localhost â†’ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ API (Vite dev server)
  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    return ''
  }
  // Production â†’ Worker URL
  return WORKER_URL
}

export function getApiUrl(endpoint: string): string {
  return `${getApiBaseUrl()}${endpoint}`
}
```

### Store: auth.ts

```typescript
interface AuthState {
  user: {
    email: string
    name: string
    picture: string
  } | null
  token: string | null
  isLoggedIn: boolean
}

// Actions
loginWithGoogle(credential: string)  // Ğ’Ñ…Ñ–Ğ´ Ñ‡ĞµÑ€ĞµĞ· Google
logout()                              // Ğ’Ğ¸Ñ…Ñ–Ğ´
restoreSession()                      // Ğ’Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ ÑĞµÑÑ–Ñ— Ğ· localStorage
```

**Whitelist Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ°:**

```typescript
async function loginWithGoogle(credential: string) {
  // Ğ”ĞµĞºĞ¾Ğ´ÑƒÑ”Ğ¼Ğ¾ JWT
  const payload = JSON.parse(atob(credential.split('.')[1]))

  // Ğ§ĞµĞºĞ°Ñ”Ğ¼Ğ¾ Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— usersStore
  const usersStore = useAdminUsersStore()
  await usersStore.init()

  // ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ÑÑ”Ğ¼Ğ¾ whitelist
  const isAllowed = usersStore.users.some(
    (u) => u.email.toLowerCase() === payload.email.toLowerCase(),
  )

  if (!isAllowed) {
    throw new Error('Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ·Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ½ĞµĞ½Ğ¾')
  }

  // Ğ—Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ”Ğ¼Ğ¾ ÑĞµÑÑ–Ñ
  user.value = { email: payload.email, name: payload.name, picture: payload.picture }
  token.value = credential
  isLoggedIn.value = true
  localStorage.setItem('corporate-discounts-auth', JSON.stringify({ user, token }))
}
```

### Store: adminExport.ts

Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ store Ğ´Ğ»Ñ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ Ñ‚Ğ° Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—.

```typescript
// ĞšĞ»ÑÑ‡Ğ¾Ğ²Ñ– Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ—
async function ensureStoresInitialized(): Promise<void> {
  // Ğ§ĞµĞºĞ°Ñ”Ğ¼Ğ¾ init() Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… stores Ğ¿ĞµÑ€ĞµĞ´ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½ÑĞ¼
  await Promise.all([
    partnersStore.init(),
    categoriesStore.init(),
    locationsStore.init(),
    faqStore.init(),
    usersStore.init(),
  ])
}

function buildFullConfig(): AppConfig {
  // Ğ—Ğ±Ğ¸Ñ€Ğ°Ñ”Ğ¼Ğ¾ Ğ´Ğ°Ğ½Ñ– Ğ· ÑƒÑÑ–Ñ… stores
  // Ğ—Ğ°Ñ…Ğ¸ÑÑ‚: ÑĞºÑ‰Ğ¾ store Ğ¿Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ñ–Ğ¹ â€” Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¾Ñ€Ğ¸Ğ³Ñ–Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ´Ğ°Ğ½Ñ–
  const partners =
    Object.keys(partnersStore.partners).length > 0
      ? partnersStore.partners
      : originalConfig.partners
  // ...
}

async function saveToLocalFile(): Promise<boolean> {
  await ensureStoresInitialized()
  const config = buildFullConfig()

  const response = await fetch(getApiUrl('/api/save-config'), {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(config),
  })
  // ...
}
```

---

## ğŸ§­ Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³

### Ğ¤Ğ°Ğ¹Ğ»: `src/router/index.ts`

```typescript
import { createRouter, createWebHashHistory } from 'vue-router'

const router = createRouter({
  // Hash History Ğ´Ğ»Ñ ÑÑƒĞ¼Ñ–ÑĞ½Ğ¾ÑÑ‚Ñ– Ğ· R2 static hosting
  history: createWebHashHistory(import.meta.env.BASE_URL),
  // ...
})
```

### ĞšĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ–Ğ²

| Ğ¨Ğ»ÑÑ…                | ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚              | Layout          | Ğ”Ğ¾ÑÑ‚ÑƒĞ¿    |
| ------------------- | ---------------------- | --------------- | --------- |
| `/login`            | `LoginView`            | `AuthLayout`    | ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ğ¹ |
| `/discounts`        | `DiscountsCatalogView` | `DefaultLayout` | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/discounts/:slug`  | `DiscountDetailsView`  | `DefaultLayout` | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/faq`              | `FaqView`              | `DefaultLayout` | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin`            | `AdminDashboardView`   | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/partners`   | `AdminPartnersView`    | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/categories` | `AdminCategoriesView`  | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/locations`  | `AdminLocationsView`   | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/faq`        | `AdminFaqView`         | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/texts`      | `AdminTextsView`       | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/images`     | `AdminImagesView`      | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/settings`   | `AdminSettingsView`    | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `/admin/users`      | `AdminUsersView`       | `AdminLayout`   | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¸Ğ¹ |

### Navigation Guard

```typescript
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()

  // Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ /login Ñ” Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ğ¼
  const isPublicRoute = to.path === '/login'

  // Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ½Ğ° Ğ»Ğ¾Ğ³Ñ–Ğ½ Ğ´Ğ»Ñ Ğ½ĞµĞ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ…
  if (!authStore.isLoggedIn && !isPublicRoute) {
    next({ name: 'login', query: { redirect: to.fullPath } })
    return
  }

  // Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ· Ğ»Ğ¾Ğ³Ñ–Ğ½Ñƒ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ…
  if (authStore.isLoggedIn && to.path === '/login') {
    next({ name: 'discounts' })
    return
  }

  next()
})
```

---

## âš™ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—

### Ğ¤Ğ°Ğ¹Ğ»: `src/data/app-config.json`

### Ğ’ĞµÑ€Ñ…Ğ½Ñ–Ğ¹ Ñ€Ñ–Ğ²ĞµĞ½ÑŒ

```typescript
interface AppConfig {
  locales: Locale[] // ['ua', 'en']
  defaultLocale: Locale // 'ua'
  allowedUsers: AdminUser[] // Whitelist ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²
  languages: Language[] // ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ Ğ¼Ğ¾Ğ²
  images: Images // Ğ¨Ğ»ÑÑ…Ğ¸ Ğ´Ğ¾ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½ÑŒ
  pages: Pages // ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ ÑÑ‚Ğ¾Ñ€Ñ–Ğ½Ğ¾Ğº
  auth: AuthConfig // Ğ¢ĞµĞºÑÑ‚Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ—
  navigation: Navigation // ĞĞ°Ğ²Ñ–Ğ³Ğ°Ñ†Ñ–Ğ¹Ğ½Ğµ Ğ¼ĞµĞ½Ñ
  filters: Filters // Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ñƒ
  pagination: Pagination // Ğ¢ĞµĞºÑÑ‚Ğ¸ Ğ¿Ğ°Ğ³Ñ–Ğ½Ğ°Ñ†Ñ–Ñ—
  partners: Record<string, PartnerConfig> // ĞŸĞ°Ñ€Ñ‚Ğ½ĞµÑ€Ğ¸
}
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ğ°

```typescript
interface PartnerConfig {
  id: string // Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ID
  slug: string // URL-friendly Ñ–Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ‚Ğ¾Ñ€
  image: string // Ğ¨Ğ»ÑÑ… Ğ´Ğ¾ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ
  promoCode: string // ĞŸÑ€Ğ¾Ğ¼Ğ¾ĞºĞ¾Ğ´

  // Ğ›Ğ¾ĞºĞ°Ğ»Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ– Ğ¿Ğ¾Ğ»Ñ
  name: LocalizedText // { ua: string, en: string }
  category: LocalizedText
  location: LocalizedText
  summary: LocalizedText
  description: LocalizedText
  address?: LocalizedText

  // Ğ—Ğ½Ğ¸Ğ¶ĞºĞ°
  discount: {
    label: LocalizedText
    description?: LocalizedText
  }

  // ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¸
  contact: {
    website?: string
    email?: string
    phone?: string
  }

  // Ğ¡Ğ¾Ñ†Ñ–Ğ°Ğ»ÑŒĞ½Ñ– Ğ¼ĞµÑ€ĞµĞ¶Ñ–
  socials: Array<{
    type: 'facebook' | 'instagram'
    url: string
  }>

  // Ğ£Ğ¼Ğ¾Ğ²Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
  terms: {
    ua: string[]
    en: string[]
  }

  // Ğ¢ĞµĞ³Ğ¸ (Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  tags?: {
    ua: string[]
    en: string[]
  }
}
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° (whitelist)

```typescript
interface AdminUser {
  id: string
  email: string // Google email
  name: string
  role: 'admin' | 'editor' // admin = Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿, editor = Ğ±ĞµĞ· ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°Ğ¼Ğ¸
  addedAt: string // ISO date
  addedBy: string // Ğ¥Ñ‚Ğ¾ Ğ´Ğ¾Ğ´Ğ°Ğ²
}
```

### Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸

```typescript
interface Filters {
  button: LocalizedText
  apply: LocalizedText
  removeFilter: LocalizedText

  locations: Record<string, FilterItem> // all, ua, europe, online
  categories: Record<string, FilterItem> // all, travel, fitness, online, beauty, shop, food, health, education, other
}

interface FilterItem {
  label: LocalizedText
  description: LocalizedText
}
```

---

## ğŸ§© ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸

### Layout ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚           | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ                               |
| ------------------- | ----------------------------------------- |
| `DefaultLayout.vue` | ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ñ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ (Header + Content)      |
| `AuthLayout.vue`    | Ğ¡Ñ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ° Ğ»Ğ¾Ğ³Ñ–Ğ½Ñƒ (Ğ±ĞµĞ· Header)              |
| `AdminLayout.vue`   | ĞĞ´Ğ¼Ñ–Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ (Sidebar + Header + Content) |

### Admin ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚              | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ                          |
| ---------------------- | ------------------------------------ |
| `AdminSidebar.vue`     | Ğ‘Ñ–Ñ‡Ğ½Ğ° Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ½Ğ°Ğ²Ñ–Ğ³Ğ°Ñ†Ñ–Ñ—               |
| `AdminHeader.vue`      | Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ· Ğ½Ğ°Ğ·Ğ²Ğ¾Ñ ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸          |
| `AdminPartnerForm.vue` | Ğ¤Ğ¾Ñ€Ğ¼Ğ° ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ/Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ğ° |
| `AdminExportPanel.vue` | ĞŸĞ°Ğ½ĞµĞ»ÑŒ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ Ñ‚Ğ° Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ        |

### UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚      | Props                                                 | ĞĞ¿Ğ¸Ñ              |
| -------------- | ----------------------------------------------------- | ----------------- |
| `UiButton.vue` | `variant`, `size`, `disabled`, `loading`              | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ° ĞºĞ½Ğ¾Ğ¿ĞºĞ°     |
| `UiInput.vue`  | `modelValue`, `type`, `placeholder`, `error`, `label` | ĞŸĞ¾Ğ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ñƒ        |
| `UiSelect.vue` | `modelValue`, `options`, `placeholder`                | Ğ’Ğ¸Ğ¿Ğ°Ğ´Ğ°ÑÑ‡Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº |
| `UiModal.vue`  | `isOpen`, `position`, `showBackdrop`                  | ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğµ Ğ²Ñ–ĞºĞ½Ğ¾    |

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ—

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚           | ĞĞ¿Ğ¸Ñ                           |
| ------------------- | ------------------------------ |
| `PartnerFilter.vue` | ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ñ–Ğ² + Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ– Ñ‡Ğ¸Ğ¿Ğ¸ |
| `FilterModal.vue`   | ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğµ Ğ²Ñ–ĞºĞ½Ğ¾ Ğ· Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸     |
| `FilterChips.vue`   | Ğ’Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ñ–Ğ² |

### Ğ†ĞºĞ¾Ğ½ĞºĞ¸

Ğ’ÑÑ– Ñ–ĞºĞ¾Ğ½ĞºĞ¸ â€” Vue ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ Ğ· inline SVG Ñƒ `src/components/icons/`:

```
ArrowBackIcon, BarsIcon, ChevronDownIcon, ChevronLeftIcon,
CloseIcon, CopyIcon, LogoutIcon
```

---

## ğŸ“ Ğ¢Ğ¸Ğ¿Ğ¸ Ñ‚Ğ° Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¸

### Ğ¤Ğ°Ğ¹Ğ»: `src/types/app-config.ts`

```typescript
export type Locale = 'ua' | 'en'

export interface LocalizedText {
  ua: string
  en: string
}

export interface AdminUser {
  id: string
  email: string
  name: string
  role: 'admin' | 'editor'
  addedAt: string
  addedBy: string
}

export interface PartnerConfig {
  id: string
  slug: string
  image: string
  promoCode: string
  name: LocalizedText
  category: LocalizedText
  location: LocalizedText
  summary: LocalizedText
  description: LocalizedText
  discount: {
    label: LocalizedText
    description?: LocalizedText
  }
  contact: {
    website?: string
    email?: string
    phone?: string
  }
  address?: LocalizedText
  socials: Array<{ type: string; url: string }>
  terms: { ua: string[]; en: string[] }
  tags?: { ua: string[]; en: string[] }
}

export interface FilterCategory {
  label: LocalizedText
  description: LocalizedText
}

export interface FilterLocation {
  label: LocalizedText
  description: LocalizedText
}

export interface AppConfig {
  locales: Locale[]
  defaultLocale: Locale
  allowedUsers?: AdminUser[]
  languages: Language[]
  images: Images
  pages: Pages
  auth: AuthConfig
  navigation: Navigation
  filters: Filters
  pagination: Pagination
  partners: Record<string, PartnerConfig>
}
```

### Ğ¤Ğ°Ğ¹Ğ»: `src/types/partner.ts`

```typescript
export type PartnerCategory =
  | 'travel'
  | 'fitness'
  | 'online'
  | 'beauty'
  | 'shop'
  | 'food'
  | 'health'
  | 'education'
  | 'other'

export interface Partner {
  id: string
  slug: string
  name: string
  category: PartnerCategory
  location: string
  discount: {
    label: string
    description?: string
    promoCode: string
  }
  images: {
    thumbnail: string
    hero?: string
  }
  summary: string
  description: string
  contact: {
    website?: string
    email?: string
    phone?: string
    address?: string
  }
  socials: Array<{ type: string; url: string }>
  terms: string[]
  tags?: string[]
}
```

---

## ğŸ”§ Composables

### useAppConfig.ts

```typescript
export function useAppConfig() {
  const config = computed(() => appConfigData as AppConfig)
  const uiStore = useUiStore()
  const locale = computed(() => uiStore.locale)

  // Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ Ğ¿ĞµÑ€ĞµĞºĞ»Ğ°Ğ´Ñƒ
  function t(text: LocalizedText | string): string {
    if (typeof text === 'string') return text
    return text[locale.value] || text.ua || ''
  }

  // ĞŸĞµÑ€ĞµĞºĞ»Ğ°Ğ´ Ğ· Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ğ°Ğ¼Ğ¸
  function tTemplate(text: LocalizedText, data: Record<string, any>): string {
    let result = t(text)
    Object.entries(data).forEach(([key, value]) => {
      result = result.replace(new RegExp(`{{${key}}}`, 'g'), String(value))
    })
    return result
  }

  // ĞÑ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ ÑˆĞ»ÑÑ…Ñƒ Ğ´Ğ¾ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ
  function getImage(path: string): string {
    // ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° @/ Ğ°Ğ»Ñ–Ğ°ÑÑƒ
    if (path.startsWith('@/')) {
      return path.replace('@/', '/src/')
    }
    return path
  }

  return { config, locale, t, tTemplate, getImage }
}
```

### useMediaQuery.ts

```typescript
export function useMediaQuery(query: string) {
  const matches = ref(false)
  const mediaQuery = window.matchMedia(query)

  const updateMatches = () => {
    matches.value = mediaQuery.matches
  }

  updateMatches()
  mediaQuery.addEventListener('change', updateMatches)

  onUnmounted(() => {
    mediaQuery.removeEventListener('change', updateMatches)
  })

  return matches
}

// Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
const isMobile = useMediaQuery('(max-width: 768px)')
const isDesktop = useMediaQuery('(min-width: 1024px)')
```

---

## ğŸ¨ Ğ¡Ñ‚Ğ¸Ğ»Ñ–

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑÑ‚Ğ¸Ğ»Ñ–Ğ²

```
src/styles/
â”œâ”€â”€ main.scss          # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ñƒ (Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ²ÑÑ–Ñ… Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²)
â”œâ”€â”€ base.scss          # Reset, Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ– ÑÑ‚Ğ¸Ğ»Ñ–, scrollbar
â”œâ”€â”€ core.scss          # Ğ—Ğ¼Ñ–Ğ½Ğ½Ñ–, Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ—, Ğ¼Ñ–ĞºÑĞ¸Ğ½Ğ¸
â””â”€â”€ responsive.scss    # ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ– ÑÑ‚Ğ¸Ğ»Ñ–
```

### SCSS Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—

```scss
// ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ñ–Ñ px Ğ² rem
@function to-rem($px) {
  @return calc($px / 16) * 1rem;
}

// Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
.element {
  padding: to-rem(16); // â†’ 1rem
  margin: to-rem(24); // â†’ 1.5rem
}
```

### SCSS ĞœÑ–ĞºÑĞ¸Ğ½Ğ¸

```scss
// Media query mixin
@mixin mq($min: null, $max: null) {
  @if $min and $max {
    @media (min-width: map-get($breakpoints, $min)) and (max-width: map-get($breakpoints, $max) - 1px) {
      @content;
    }
  } @else if $min {
    @media (min-width: map-get($breakpoints, $min)) {
      @content;
    }
  } @else if $max {
    @media (max-width: map-get($breakpoints, $max) - 1px) {
      @content;
    }
  }
}

// Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
.element {
  font-size: to-rem(16);

  @include mq(null, md) {
    font-size: to-rem(14); // < 768px
  }

  @include mq(lg) {
    font-size: to-rem(18); // >= 1024px
  }
}
```

### Ğ‘Ñ€ĞµĞ¹ĞºĞ¿Ğ¾Ñ–Ğ½Ñ‚Ğ¸

| ĞĞ°Ğ·Ğ²Ğ° | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ | ĞŸÑ€Ğ¸ÑÑ‚Ñ€Ñ–Ğ¹            |
| ----- | -------- | ------------------- |
| `xs`  | `0`      | ĞœĞ¾Ğ±Ñ–Ğ»ÑŒĞ½Ñ– (Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºÑ–) |
| `sm`  | `576px`  | ĞœĞ¾Ğ±Ñ–Ğ»ÑŒĞ½Ñ– (Ğ²ĞµĞ»Ğ¸ĞºÑ–)   |
| `md`  | `768px`  | ĞŸĞ»Ğ°Ğ½ÑˆĞµÑ‚Ğ¸            |
| `lg`  | `1024px` | Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ¸ (Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºÑ–) |
| `xl`  | `1280px` | Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ¸ (ÑĞµÑ€ĞµĞ´Ğ½Ñ–)  |
| `xxl` | `1440px` | Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ¸ (Ğ²ĞµĞ»Ğ¸ĞºÑ–)   |

### BEM ĞœĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ

```scss
.component-name {
  // Block styles

  &__element {
    // Element styles

    &--modifier {
      // Modifier styles
    }
  }

  &--modifier {
    // Block modifier styles
  }
}
```

---

## ğŸ›¡ï¸ Ğ‘ĞµĞ·Ğ¿ĞµĞºĞ°

### Input Sanitization

Ğ¤Ğ°Ğ¹Ğ»: `src/utils/sanitize.ts`

```typescript
// Ğ•ĞºÑ€Ğ°Ğ½ÑƒĞ²Ğ°Ğ½Ğ½Ñ HTML
export function escapeHtml(str: string): string {
  const htmlEscapes: Record<string, string> = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
  }
  return str.replace(/[&<>"']/g, (char) => htmlEscapes[char] || char)
}

// Ğ’Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ HTML Ñ‚ĞµĞ³Ñ–Ğ²
export function stripHtmlTags(str: string): string {
  return str.replace(/<[^>]*>/g, '')
}

// Ğ¡Ğ°Ğ½Ñ–Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ€ÑĞ´ĞºĞ°
export function sanitizeString(str: string, maxLength = 1000): string {
  return escapeHtml(stripHtmlTags(str.trim())).slice(0, maxLength)
}

// Ğ¡Ğ°Ğ½Ñ–Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ email
export function sanitizeEmail(email: string): string {
  return email.toLowerCase().trim().slice(0, 254)
}

// Ğ¡Ğ°Ğ½Ñ–Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ URL
export function sanitizeUrl(url: string): string {
  const trimmed = url.trim()
  if (!trimmed) return ''
  try {
    const parsed = new URL(trimmed)
    if (!['http:', 'https:'].includes(parsed.protocol)) return ''
    return parsed.href
  } catch {
    return ''
  }
}

// Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ email
export function isValidEmail(email: string): boolean {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)
}

// Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ URL
export function isValidUrl(url: string): boolean {
  try {
    const parsed = new URL(url)
    return ['http:', 'https:'].includes(parsed.protocol)
  } catch {
    return false
  }
}
```

### Security Headers (public/\_headers)

```
/*
  X-Content-Type-Options: nosniff
  X-Frame-Options: DENY
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=()
  Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://accounts.google.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https: blob:; connect-src 'self' https://accounts.google.com https://oauth2.googleapis.com; frame-src https://accounts.google.com; object-src 'none'; base-uri 'self'

/admin/*
  X-Robots-Tag: noindex, nofollow
```

### HTTPS Redirect

```typescript
// src/main.ts
if (
  import.meta.env.PROD &&
  window.location.protocol === 'http:' &&
  !window.location.hostname.includes('localhost')
) {
  window.location.href = window.location.href.replace('http:', 'https:')
}
```

---

## ğŸš€ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸ Ñ‚Ğ° Ğ·Ğ±Ñ–Ñ€ĞºĞ°

### NPM Scripts

```json
{
  "scripts": {
    "dev": "vite",
    "build": "run-p type-check \"build-only {@}\" --",
    "preview": "vite preview",
    "test:unit": "vitest",
    "type-check": "vue-tsc --build",
    "lint": "eslint . --fix --cache",
    "lint:styles": "stylelint \"src/**/*.{css,scss,vue}\" --fix",
    "format": "prettier --write .",
    "tokens:build": "tsx scripts/build-tokens.ts",
    "images:webp": "tsx scripts/convert-to-webp.ts",
    "deploy:r2": "./scripts/deploy-r2.sh",
    "deploy:worker": "./scripts/deploy-worker.sh",
    "deploy": "npm run build && npm run deploy:r2 && npm run deploy:worker"
  }
}
```

### Deploy Scripts

**deploy-r2.sh** â€” Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ² Ğ½Ğ° R2:

```bash
#!/bin/bash
# Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ·Ğ¼Ñ–Ğ½Ğ½Ğ¸Ñ… Ğ· .env
export $(grep -v '^#' .env | xargs)

# Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ dist/ Ğ· R2
aws s3 sync dist/ s3://$R2_BUCKET_NAME/ \
  --endpoint-url $R2_ENDPOINT \
  --profile $AWS_PROFILE \
  --delete
```

**deploy-worker.sh** â€” Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Cloudflare Worker:

```bash
#!/bin/bash
cd "$(dirname "$0")/../worker" || exit 1
wrangler deploy
```

### Vite Configuration

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)),
    },
  },
  server: {
    watch: {
      // Ğ†Ğ³Ğ½Ğ¾Ñ€ÑƒÑ”Ğ¼Ğ¾ app-config.json Ğ´Ğ»Ñ ÑƒĞ½Ğ¸ĞºĞ½ĞµĞ½Ğ½Ñ HMR reload
      ignored: ['**/src/data/app-config.json'],
    },
  },
  // Dev API middleware
  configureServer(server) {
    server.middlewares.use('/api/load-config', (req, res, next) => {
      // ... serve app-config.json
    })
    server.middlewares.use('/api/save-config', (req, res, next) => {
      // ... save app-config.json
    })
  },
})
```

---

## ğŸ› Troubleshooting

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ—Ğ¼Ñ–Ğ½Ğ¸ Ğ½Ğµ Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ

**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:**

1. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ Worker Secrets Ğ² Cloudflare Dashboard
2. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Worker: `cd worker && npm run tail`
3. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ console Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ° Ğ½Ğ° CORS Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: 404 Ğ½Ğ° production (/admin/partners)

**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** ĞŸÑ€Ğ¾Ñ”ĞºÑ‚ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ” Hash History (`createWebHashHistory`). URL Ğ¼Ğ°Ñ” Ğ±ÑƒÑ‚Ğ¸:

```
https://.../#/admin/partners  âœ…
https://.../admin/partners    âŒ
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞĞµ Ğ¼Ğ¾Ğ¶Ñƒ ÑƒĞ²Ñ–Ğ¹Ñ‚Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Google

**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:**

1. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ `VITE_GOOGLE_CLIENT_ID` Ğ² `.env`
2. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ Authorized JavaScript Origins Ğ² Google Cloud Console
3. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ Ñ‡Ğ¸ Ğ²Ğ°Ñˆ email Ñ” Ğ² `allowedUsers` Ğ² `app-config.json`

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑ€ÑÑÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ

**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** Stores Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·ÑƒÑÑ‚ÑŒÑÑ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾. Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ `buildFullConfig()` Ğ¼Ğ°Ñ” fallback:

```typescript
// Ğ¯ĞºÑ‰Ğ¾ store Ğ¿Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ñ–Ğ¹ â€” Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¾Ñ€Ğ¸Ğ³Ñ–Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ´Ğ°Ğ½Ñ–
const partners =
  Object.keys(partnersStore.partners).length > 0 ? partnersStore.partners : originalConfig.partners
```

---

## ğŸ“ ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¸

**ĞŸÑ€Ğ¾Ñ”ĞºÑ‚:** UPSTARS Corporate Discounts  
**Ğ’ĞµÑ€ÑÑ–Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ—:** 2.0.0  
**Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ:** 24 Ğ»Ğ¸ÑÑ‚Ğ¾Ğ¿Ğ°Ğ´Ğ° 2025

---

## ğŸ‘¨â€ğŸ’» ĞĞ²Ñ‚Ğ¾Ñ€

**Viktor Hirenko**  
Frontend Developer  
Email: v.hirenko@upstars.com
